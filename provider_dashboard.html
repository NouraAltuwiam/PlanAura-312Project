<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provider Dashboard - My Services</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Custom Confirm Delete Modal */
        .custom-confirm-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .custom-confirm-box {
            background: white;
            padding: 30px 40px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            text-align: center;
            min-width: 400px;
            max-width: 500px;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .custom-confirm-icon {
            font-size: 60px;
            color: #EF5473;
            margin-bottom: 15px;
        }

        .custom-confirm-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .custom-confirm-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .custom-confirm-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .custom-confirm-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .confirm-yes {
            background: #EF5473;
            color: white;
        }

        .confirm-yes:hover {
            background: #d1425a;
            transform: translateY(-2px);
        }

        .confirm-no {
            background: #6c757d;
            color: white;
        }

        .confirm-no:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        body.dark-mode .custom-confirm-box {
            background: #2a2a2a;
        }

        body.dark-mode .custom-confirm-title {
            color: #ffffff;
        }

        body.dark-mode .custom-confirm-message {
            color: #cccccc;
        }

        /* ÿ™ÿµŸÖŸäŸÖ ÿßŸÑŸÉÿ±ÿ™ - ŸÉÿßŸÖŸÑ Ÿàÿ´ÿßÿ®ÿ™ ÿØÿßÿ¶ŸÖÿßŸã (ÿ®ÿØŸàŸÜ ÿ™ŸÖÿØÿØ) */
        .services-horizontal-scroll .service-card {
            display: flex !important;
            flex-direction: column !important;
            width: 320px !important;
            height: 550px !important; /* ÿßÿ±ÿ™ŸÅÿßÿπ ÿ´ÿßÿ®ÿ™ */
            cursor: default !important; /* ÿπÿßÿØŸäÿå ŸÖŸà pointer */
        }

        .services-horizontal-scroll .service-image {
            flex-shrink: 0 !important;
            height: 200px !important;
            width: 100% !important;
            object-fit: cover !important;
        }

        .services-horizontal-scroll .service-info {
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            padding: 20px !important;
        }

        .services-horizontal-scroll .service-info h3 {
            margin-bottom: 12px !important;
            flex-shrink: 0 !important;
            font-size: 1.15em !important;
        }

        /* ÿßŸÑŸàÿµŸÅ ÿ∏ÿßŸáÿ± ÿØÿßÿ¶ŸÖÿßŸã ŸÖÿπ scrollbar ÿ•ÿ∞ÿß ÿ∑ŸàŸäŸÑ */
        .services-horizontal-scroll .service-info .description {
            flex: 1 !important;
            color: #666 !important;
            line-height: 1.6 !important;
            font-size: 0.9em !important;
            margin-bottom: 15px !important;
            overflow-y: auto !important;
            overflow-x: hidden !important;
            padding-right: 8px !important;
            word-wrap: break-word !important;
            max-height: 150px !important;
            opacity: 1 !important; /* ÿØÿßÿ¶ŸÖÿßŸã ÿ∏ÿßŸáÿ± */
        }

        /* Scrollbar ŸÑŸÑŸàÿµŸÅ */
        .services-horizontal-scroll .service-info .description::-webkit-scrollbar {
            width: 5px;
        }

        .services-horizontal-scroll .service-info .description::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .services-horizontal-scroll .service-info .description::-webkit-scrollbar-thumb {
            background: #A376A2;
            border-radius: 3px;
        }

        body.dark-mode .services-horizontal-scroll .service-info .description::-webkit-scrollbar-track {
            background: #3d3d3d;
        }

        body.dark-mode .services-horizontal-scroll .service-info .description::-webkit-scrollbar-thumb {
            background: #e0c3e0;
        }

        .services-horizontal-scroll .service-status {
            flex-shrink: 0 !important;
            margin-top: auto !important;
            padding-top: 12px !important;
            border-top: 1px dashed #ddd !important;
        }

        .services-horizontal-scroll .service-actions {
            flex-shrink: 0 !important;
            margin-top: 0 !important;
        }
    </style>
</head>
<body>

    <!-- Custom Confirm Delete Modal -->
    <div class="custom-confirm-overlay" id="customConfirm">
        <div class="custom-confirm-box">
            <div class="custom-confirm-icon">‚ö†Ô∏è</div>
            <div class="custom-confirm-title">Delete Service?</div>
            <div class="custom-confirm-message" id="confirmMessage">Are you sure you want to delete this service?</div>
            <div class="custom-confirm-buttons">
                <button class="custom-confirm-btn confirm-no" onclick="closeConfirm()">Cancel</button>
                <button class="custom-confirm-btn confirm-yes" id="confirmYesBtn">Delete</button>
            </div>
        </div>
    </div>

    <div class="planning-hub-header">
        PLANNING HUB
    </div>

    <nav class="navbar">
        <div class="logo">
            <img src="logo.png" alt="EventPlanner Logo" class="logo-img">
            PlanAura
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="services.html">Our Services</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="customer_dashboard.html">My Account</a></li>
            <li><a href="provider_dashboard.html" class="active">Provider</a></li>
            <li><a href="reviews.html">Reviews</a></li>
            <li><a href="partners.html">Our Partners</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="breadcrumb">
            <a href="index.html">Home</a> &raquo; <a href="provider_dashboard.html">Planning Hub</a> &raquo; My Services
        </div>

        <div class="provider-quick-actions">
            <a href="provider_dashboard.html" class="quick-action-btn active">
                <span>üè†</span> My Services
            </a>
            <a href="add_service.html" class="quick-action-btn">
                <span>‚ûï</span> Add Service
            </a>
            <a href="manage_team.html" class="quick-action-btn">
                <span>üë•</span> Manage Team
            </a>
        </div>

        <section class="section">
            <h1>My Services</h1>

            <div class="service-filters">
                <button class="filter-button active-filter" data-category="all">All Services</button>
                <button class="filter-button" data-category="parties">Parties</button>
                <button class="filter-button" data-category="decorations">Decorations</button>
                <button class="filter-button" data-category="venues">Venues</button>
                <button class="filter-button" data-category="food">Food & Beverages</button>
            </div>

            <div class="services-horizontal-scroll" id="servicesContainer">
                <div style="width: 100%; text-align: center; padding: 40px; color: #666;">
                    <p style="font-size: 1.2em;">No services added yet. Click "Add Service" to create your first service!</p>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <p>Contact us: info@eventplanner.com | Phone: (555) 123-4567</p>
        <p>@copyrights EventPlanner 2024</p>
        <div style="margin-top: 1rem;">
            <a href="#">Help Center</a> |
            <a href="#">Privacy Policy</a> |
            <a href="#">Terms of Service</a>
        </div>
    </footer>

    <script>
        // Apply dark mode from localStorage
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
        }

        const servicesContainer = document.getElementById('servicesContainer');
        let allServices = [];
        let currentFilter = 'all';

        // ============================================
        // LOAD SERVICES FROM LOCAL STORAGE
        // ============================================
        function loadServices() {
            const storedServices = localStorage.getItem('providerServices');
            
            if (storedServices) {
                allServices = JSON.parse(storedServices);
                displayServices(allServices);
            } else {
                servicesContainer.innerHTML = `
                    <div style="width: 100%; text-align: center; padding: 40px; color: #666;">
                        <p style="font-size: 1.2em;">No services added yet. Click "Add Service" to create your first service!</p>
                    </div>
                `;
            }
        }

        // ============================================
        // DISPLAY SERVICES
        // ============================================
        function displayServices(services) {
            if (!services || services.length === 0) {
                servicesContainer.innerHTML = `
                    <div style="width: 100%; text-align: center; padding: 40px; color: #666;">
                        <p style="font-size: 1.2em;">No services found. Try adding a new service!</p>
                    </div>
                `;
                return;
            }

            servicesContainer.innerHTML = '';

            services.forEach(service => {
                const serviceCard = createServiceCard(service);
                servicesContainer.appendChild(serviceCard);
            });
        }

        // ============================================
        // CREATE SERVICE CARD - ŸÉÿßŸÖŸÑ ÿØÿßÿ¶ŸÖÿßŸã
        // ============================================
        function createServiceCard(service) {
            const card = document.createElement('div');
            card.className = 'service-card';
            card.dataset.serviceId = service.id;

            const statusClass = service.status === 'active' ? 'active' : 'paused';
            const statusText = service.status === 'active' ? 'Active' : 'Paused';
            const actionButton = service.status === 'active' 
                ? '<button class="action-btn pause-btn" onclick="toggleServiceStatus(' + service.id + ')">Pause</button>'
                : '<button class="action-btn resume-btn" onclick="toggleServiceStatus(' + service.id + ')">Resume</button>';

            const imageSource = service.image || 'service_placeholder.jpg';

            card.innerHTML = `
                <img src="${imageSource}" alt="${service.name}" class="service-image" 
                     onerror="this.src='service_placeholder.jpg'">
                <div class="service-info">
                    <h3>${service.name}</h3>
                    <p class="description">${service.description}</p>
                    <div class="service-status">
                        <span class="status-badge ${statusClass}">${statusText}</span>
                        <span class="clients-count">${service.clients} Clients</span>
                    </div>
                </div>
                <div class="service-actions">
                    <div class="edit-pause-group">
                        <button class="action-btn edit-btn" onclick="editService(${service.id})">Edit</button>
                        ${actionButton}
                    </div>
                    <button class="action-btn delete-btn-action" onclick="confirmDelete(${service.id}, '${service.name.replace(/'/g, "\\'")}')">Delete</button>
                </div>
            `;

            return card;
        }

        // ============================================
        // FILTER SERVICES
        // ============================================
        function filterServices(category) {
            currentFilter = category;
            
            if (category === 'all') {
                displayServices(allServices);
            } else {
                const filtered = allServices.filter(service => 
                    service.category.toLowerCase() === category.toLowerCase()
                );
                displayServices(filtered);
            }

            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.remove('active-filter');
            });
            event.target.classList.add('active-filter');
        }

        // ============================================
        // TOGGLE SERVICE STATUS
        // ============================================
        function toggleServiceStatus(serviceId) {
            const serviceIndex = allServices.findIndex(s => s.id === serviceId);
            
            if (serviceIndex !== -1) {
                allServices[serviceIndex].status = 
                    allServices[serviceIndex].status === 'active' ? 'paused' : 'active';
                
                localStorage.setItem('providerServices', JSON.stringify(allServices));
                loadServices();
            }
        }

        // ============================================
        // CONFIRM DELETE - Custom Modal
        // ============================================
        let serviceToDelete = null;

        function confirmDelete(serviceId, serviceName) {
            serviceToDelete = serviceId;
            document.getElementById('confirmMessage').textContent = 
                `Are you sure you want to delete "${serviceName}"? This action cannot be undone.`;
            document.getElementById('customConfirm').style.display = 'flex';
        }

        function closeConfirm() {
            document.getElementById('customConfirm').style.display = 'none';
            serviceToDelete = null;
        }

        document.getElementById('confirmYesBtn').addEventListener('click', function() {
            if (serviceToDelete) {
                deleteService(serviceToDelete);
                closeConfirm();
            }
        });

        // Close on click outside
        document.getElementById('customConfirm').addEventListener('click', function(e) {
            if (e.target === this) {
                closeConfirm();
            }
        });

        // ============================================
        // DELETE SERVICE
        // ============================================
        function deleteService(serviceId) {
            allServices = allServices.filter(s => s.id !== serviceId);
            localStorage.setItem('providerServices', JSON.stringify(allServices));
            loadServices();
        }

        // ============================================
        // EDIT SERVICE - ŸäŸÜŸÇŸÑŸÉ ŸÑÿµŸÅÿ≠ÿ© Add Service ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        // ============================================
        function editService(serviceId) {
            // Redirect to add_service.html with edit parameter
            window.location.href = 'add_service.html?edit=' + serviceId;
        }

        // Setup filter buttons
        document.querySelectorAll('.filter-button').forEach(button => {
            button.addEventListener('click', function() {
                filterServices(this.dataset.category);
            });
        });

        // Load services on page load
        window.addEventListener('DOMContentLoaded', loadServices);
    </script>
</body>
</html>