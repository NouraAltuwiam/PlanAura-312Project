<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Team</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="planning-hub-header">
        PLANNING HUB
    </div>
    
    
<nav class="navbar">
        <div class="logo">
            <img src="logo.png" alt="EventPlanner Logo" class="logo-img">
            PlanAura
        </div>
        <ul class="nav-links">
            <li><a href="index.html" class="active">Home</a></li>
            <li><a href="services.html">Our Services</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="customer_dashboard.html">My Account</a></li>
            <li><a href="provider_dashboard.html">Provider</a></li>
            <li><a href="reviews.html">Reviews</a></li>
            <li><a href="partners.html">Our Partners</a></li>
        </ul>
    </nav>
     
    <div class="container">
        <div class="breadcrumbs">
        <a href="index.html">Home</a> &raquo; <a href="provider_dashboard.html">Planning Hub</a> &raquo; Manage Team
        </div>

        <div class="page-container">
            <div class="main-content centered-form">
                <h1 class="section-title">Manage Team</h1>

                <div class="team-management-grid">
                    <div class="add-member-section form-card">
                        <h2>+ Add Team Member</h2>
                        <form id="addMemberForm">
                            <div class="form-group">
                                <label for="fullName" class="required">Full Name</label>
                                <input type="text" id="fullName" name="fullName" required>
                            </div>
                            
                            <div class="inline-form-group">
                                <div class="form-group">
                                    <label for="photo" class="required">Photo</label>
                                    <input type="file" id="photo" name="photo" accept="image/*" style="display: none;">
                                    <div class="service-photo-container" id="photoContainer" style="height: 80px; cursor: pointer;" onclick="document.getElementById('photo').click()">
                                        Upload Photo
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="dob" class="required">Date Of Birth</label>
                                    <input type="date" id="dob" name="dob" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email" class="required">Email</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="areaExpertise" class="required">Area of Expertise</label>
                                <input type="text" id="areaExpertise" name="areaExpertise" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="skills" class="required">Skills</label>
                                <textarea id="skills" name="skills" rows="2" placeholder="Enter skills separated by commas" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="education" class="required">Education</label>
                                <select id="education" name="education" required>
                                    <option value="">Select Education Level</option>
                                    <option value="highschool">High School</option>
                                    <option value="bachelor">Bachelor's Degree</option>
                                    <option value="master">Master's Degree</option>
                                    <option value="phd">PhD</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="message" class="required">General Message</label>
                                <textarea id="message" name="message" rows="3" placeholder="Any additional information..." required></textarea>
                            </div>
                            
                            <div class="form-actions" style="justify-content: flex-start;">
                                <button type="submit" class="add-member-btn">Add Team Member</button>
                            </div>
                        </form>
                    </div>

                    <div class="available-members-section">
                        <h2>Available Members</h2>
                        
                        <form id="deleteMembersForm">
                            <div class="available-members-list" id="membersList">
                                <!-- سيتم عرض الأعضاء هنا عبر JavaScript -->
                            </div>

                            <div class="delete-member-action">
                                <button type="submit" class="delete-submit-btn-team">Delete Selected Members</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="page-bottom-actions">
                    <button type="button" class="back-btn" onclick="window.history.back()">Back</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Contact us: info@eventplanner.com | Phone: (555) 123-4567</p>
        <p>@copyrights EventPlanner 2024</p>
        <div style="margin-top: 1rem;">
            <a href="#">Help Center</a> |
            <a href="#">Privacy Policy</a> |
            <a href="#">Terms of Service</a>
        </div>
    </footer>
    <style>
        .required::after {
            content: " *";
            color: #d32f2f;
        }
    </style>
    <script>
 
    if (localStorage.getItem('darkMode') === 'enabled') {
        document.body.classList.add('dark-mode');
    }


    let teamMembers = [
        {
            id: 1,
            name: "Sadeem Alsultan",
            role: "Manager",
            email: "sadeem@plan.com",
            expertise: "Event Planning, Management",
            photo: "girl.png",
            color: "#4CAF50"
        },
        {
            id: 2,
            name: "Noura Altuwiam",
            role: "Designer",
            email: "noura@plan.com",
            expertise: "Decoration, Theme Design",
            photo: "girl.png",
            color: "#2196F3"
        },
        {
            id: 3,
            name: "Farah Alhamed",
            role: "Developer",
            email: "farah@plan.com",
            expertise: "Web Development, Technical Support",
            photo: "girl.png",
            color: "#FF9800"
        },
        {
            id: 4,
            name: "Juri Alzahem",
            role: "Coordinator",
            email: "juri@plan.com",
            expertise: "Client Relations, Venue Management",
            photo: "girl.png",
            color: "#9C27B0"
        }
    ];

    document.addEventListener('DOMContentLoaded', function() {
        setupEventListeners();
        renderMembersList();
    });

 
    function setupEventListeners() {
 
        const photoInput = document.getElementById('photo');
        const photoContainer = document.getElementById('photoContainer');
        
        photoInput.addEventListener('change', function(e) {
            if (e.target.files && e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    photoContainer.style.backgroundImage = `url(${event.target.result})`;
                    photoContainer.classList.add('has-image');
                    photoContainer.textContent = '';
                };
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        document.getElementById('addMemberForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
          
            let isValid = true;
            let errorMessage = '';
            
            const fullName = document.getElementById('fullName').value.trim();
            const photo = document.getElementById('photo').files[0];
            const dob = document.getElementById('dob').value;
            const email = document.getElementById('email').value.trim();
            const areaExpertise = document.getElementById('areaExpertise').value.trim();
            const skills = document.getElementById('skills').value.trim();
            const education = document.getElementById('education').value;
            const message = document.getElementById('message').value.trim();
            
  
            // التحقق من الحقول النصية المطلوبة
            const requiredTextFields = document.querySelectorAll('#addMemberForm input[type="text"][required], #addMemberForm input[type="email"][required], #addMemberForm input[type="date"][required], #addMemberForm select[required], #addMemberForm textarea[required]');
            requiredTextFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    const fieldLabel = field.closest('.form-group').querySelector('label').textContent.replace(' *', '');
                    errorMessage += `- ${fieldLabel} is required\n`;
                }
            });
            
    
            if (fullName && /^\d/.test(fullName)) {
                isValid = false;
                errorMessage += "- Name cannot start with numbers\n";
            }
            
            // التحقق من الصورة (مطلوبة)
            if (!photo) {
                isValid = false;
                errorMessage += "- Photo is required\n";
            } else if (!photo.type.startsWith('image/')) {
                isValid = false;
                errorMessage += "- Photo must be an image file\n";
            }
            
      
            if (dob) {
                const dobDate = new Date(dob);
                const cutoffDate = new Date('2008-12-31');
                if (dobDate > cutoffDate) {
                    isValid = false;
                    errorMessage += "- Date of Birth should not be after 2008\n";
                }
            }
            
  
            if (email && !isValidEmail(email)) {
                isValid = false;
                errorMessage += "- Please enter a valid email address\n";
            }
            
            // التحقق من حقل الرسالة
            if (!message) {
                isValid = false;
                errorMessage += "- General Message is required\n";
            }
            
    
            if (!isValid) {
                alert("Please fix the following errors:\n\n" + errorMessage);
            } else {
                addNewMember();
            }
        });

        document.getElementById('deleteMembersForm').addEventListener('submit', function(e) {
            e.preventDefault();
            deleteSelectedMembers();
        });
    }


    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    function addNewMember() {
        const fullName = document.getElementById('fullName').value.trim();
        const photoFile = document.getElementById('photo').files[0];
        const dob = document.getElementById('dob').value;
        const email = document.getElementById('email').value.trim();
        const areaExpertise = document.getElementById('areaExpertise').value.trim();
        const skills = document.getElementById('skills').value.trim();
        const education = document.getElementById('education').value;
        const message = document.getElementById('message').value.trim();
        
       
        const reader = new FileReader();
        reader.onload = function(event) {
         
            const newMember = {
                id: teamMembers.length > 0 ? Math.max(...teamMembers.map(m => m.id)) + 1 : 1,
                name: fullName,
                role: areaExpertise,
                email: email,
                expertise: skills,
                photo: event.target.result,
                color: getRandomColor()
            };
            
        
            teamMembers.push(newMember);
            
          
            renderMembersList();
            
          
            document.getElementById('addMemberForm').reset();
            document.getElementById('photoContainer').style.backgroundImage = '';
            document.getElementById('photoContainer').classList.remove('has-image');
            document.getElementById('photoContainer').textContent = 'Upload Photo';
            
            alert(`Thank you! Team member ${fullName} has been added successfully!`);
        };
        reader.readAsDataURL(photoFile);
    }


    function deleteSelectedMembers() {
        const selectedCheckboxes = document.querySelectorAll('.delete-checkbox:checked');
        
        if (selectedCheckboxes.length === 0) {
            alert("Please select at least one member to delete");
            return;
        }
        
        const confirmDelete = confirm(`Are you sure you want to delete ${selectedCheckboxes.length} member(s)?`);
        
        if (confirmDelete) {
  
            const membersToDelete = Array.from(selectedCheckboxes).map(checkbox => parseInt(checkbox.value));
       
            teamMembers = teamMembers.filter(member => !membersToDelete.includes(member.id));
            
           
            renderMembersList();
            
            alert("Selected members have been deleted successfully!");
        }
    }

    function renderMembersList() {
        const membersList = document.getElementById('membersList');
        membersList.innerHTML = '';
        
        teamMembers.forEach(member => {
            const memberItem = document.createElement('div');
            memberItem.className = 'member-item';
            memberItem.innerHTML = `
                <div class="member-info">
                    <div class="member-avatar" style="background-color: ${member.color};">
                        <img src="${member.photo}" alt="${member.name}" class="member-img">
                    </div>
                    <div class="member-details">
                        <span class="role">${member.name} (${member.role})</span>
                        <span class="email">${member.email}</span>
                        <span class="expertise">${member.expertise}</span>
                    </div>
                </div>
                <label class="delete-checkbox-label">
                    <input type="checkbox" class="delete-checkbox" name="memberToDelete[]" value="${member.id}">
                    <span class="custom-checkbox"></span>
                </label>
            `;
            membersList.appendChild(memberItem);
        });
    }

    function getRandomColor() {
        const colors = ['#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#F44336', '#009688', '#795548'];
        return colors[Math.floor(Math.random() * colors.length)];
    }
</script>
</body>
</html>